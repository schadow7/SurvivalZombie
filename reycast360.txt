raycast360 

void Zombie::doRayCast(RayCastCallback & callback)
{
	float currentRayAngle = 0;
	float rayLength = .33f;
	float DEGTORAD = 0.017453292519;
	int RayNum = 8;
	//in Step() function
	for (int i=0;i< RayNum;i++)
	{
		currentRayAngle += 360 / RayNum * DEGTORAD;
		//calculate points of ray
		b2Vec2 p1=body->GetPosition();
		b2Vec2 p2 = p1 + rayLength * b2Vec2(sinf(currentRayAngle), cosf(currentRayAngle));
		world->RayCast(&callback, p1, p2);
	}
}

//stary agressive

RayCastCallback callbackInfo;
doRayCast(callbackInfo, position);
//sztuczne pola potncja≈Çu
b2Vec2 direction = .1f*(player_position - position);
for (auto& v : obstacles)
{
	auto temp = v - position;
	temp.x = temp.x / temp.Length() / temp.Length();
	temp.y = temp.y / temp.Length() / temp.Length();
	direction -= temp;
}
//normalizacja
direction.x = direction.x / direction.Length();
direction.y = direction.y / direction.Length();
return direction;